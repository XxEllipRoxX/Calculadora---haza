<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Cient√≠fica</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            transition: background 0.3s ease;
        }

        .light-mode {
            background: linear-gradient(to bottom right, #f1f5f9, #dbeafe, #e0e7ff);
        }

        .dark-mode {
            background: linear-gradient(to bottom right, #111827, #1e293b, #111827);
        }

        .calculator-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
        }

        .calculator {
            background: white;
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            padding: 1rem;
            width: 100%;
            max-width: 32rem;
            transition: background 0.3s ease;
        }

        .dark-mode .calculator {
            background: #1f2937;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding: 0 0.5rem;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .icon {
            color: #2563eb;
            transition: color 0.3s ease;
        }

        .dark-mode .icon {
            color: #60a5fa;
        }

        .title {
            font-size: 0.75rem;
            font-weight: 500;
            color: #4b5563;
            transition: color 0.3s ease;
        }

        .dark-mode .title {
            color: #d1d5db;
        }

        .theme-toggle {
            padding: 0.375rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #e5e7eb;
            color: #374151;
        }

        .dark-mode .theme-toggle {
            background: #374151;
            color: #fbbf24;
        }

        .theme-toggle:hover {
            background: #d1d5db;
        }

        .dark-mode .theme-toggle:hover {
            background: #4b5563;
        }

        .display {
            background: linear-gradient(to bottom right, #f9fafb, #f3f4f6);
            border: 1px solid #e5e7eb;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .dark-mode .display {
            background: linear-gradient(to bottom right, #111827, #1f2937);
            border-color: #374151;
        }

        #displayValue {
            text-align: right;
            font-size: 2.5rem;
            font-weight: 300;
            color: #1f2937;
            word-break: break-all;
            line-height: 1.2;
            transition: color 0.3s ease;
        }

        .dark-mode #displayValue {
            color: #f3f4f6;
        }

        .buttons-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.375rem;
        }

        .btn {
            height: 3rem;
            border-radius: 9999px;
            font-weight: 500;
            font-size: 0.875rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-function {
            background: #dbeafe;
            color: #1d4ed8;
        }

        .dark-mode .btn-function {
            background: #1e3a8a;
            color: #93c5fd;
        }

        .btn-function:hover {
            background: #bfdbfe;
        }

        .dark-mode .btn-function:hover {
            background: #1e40af;
        }

        .btn-number {
            background: #f3f4f6;
            color: #1f2937;
        }

        .dark-mode .btn-number {
            background: #374151;
            color: #f3f4f6;
        }

        .btn-number:hover {
            background: #e5e7eb;
        }

        .dark-mode .btn-number:hover {
            background: #4b5563;
        }

        .btn-clear {
            background: #fee2e2;
            color: #991b1b;
        }

        .dark-mode .btn-clear {
            background: #7f1d1d;
            color: #fca5a5;
        }

        .btn-clear:hover {
            background: #fecaca;
        }

        .dark-mode .btn-clear:hover {
            background: #991b1b;
        }

        .btn-equals {
            grid-column: span 2;
            background: #2563eb;
            color: white;
            font-weight: 600;
            font-size: 1rem;
        }

        .btn-equals:hover {
            background: #1d4ed8;
        }

        .dark-mode .btn-equals:hover {
            background: #3b82f6;
        }

        .btn-transparent {
            background: transparent;
            color: #9ca3af;
        }

        .dark-mode .btn-transparent {
            color: #6b7280;
        }

        .btn-transparent:hover {
            background: #f9fafb;
        }

        .dark-mode .btn-transparent:hover {
            background: #374151;
        }

        .separator {
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 300;
            font-size: 1.25rem;
            color: #d1d5db;
        }

        .dark-mode .separator {
            color: #4b5563;
        }

        @media (min-width: 640px) {
            .calculator-container {
                padding: 1rem;
            }

            .calculator {
                padding: 1.25rem;
            }

            .btn {
                height: 3.5rem;
                font-size: 1rem;
            }

            #displayValue {
                font-size: 3rem;
            }

            .title {
                font-size: 0.875rem;
            }

            .separator {
                font-size: 1.5rem;
            }
        }

        @media (min-width: 768px) {
            #displayValue {
                font-size: 3.75rem;
            }
        }
    </style>
</head>
<body>
    <div id="app" class="light-mode">
        <div class="calculator-container">
            <div class="calculator">
                <div class="header">
                    <div class="header-left">
                        <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="4" y="2" width="16" height="20" rx="2"></rect>
                            <line x1="8" y1="6" x2="16" y2="6"></line>
                            <line x1="16" y1="10" x2="16" y2="10"></line>
                        </svg>
                        <span class="title">Calculadora Cient√≠fica</span>
                    </div>
                    <button id="themeToggle" class="theme-toggle">
                        <span id="themeIcon">üåô</span>
                        <span id="themeText">Oscuro</span>
                    </button>
                </div>

                <div class="display">
                    <div id="displayValue">0</div>
                </div>

                <div class="buttons-grid">
                    <button class="btn btn-function" data-action="toggleRadian" id="radDegBtn">Rad</button>
                    <div class="separator">|</div>
                    <button class="btn btn-transparent">Deg</button>
                    <button class="btn btn-function" data-function="factorial">x!</button>
                    <button class="btn btn-function" data-value="(">(</button>
                    <button class="btn btn-function" data-value=")">)</button>
                    <button class="btn btn-function" data-action="percent">%</button>

                    <button class="btn btn-function" data-function="inverse">Inv</button>
                    <button class="btn btn-function" data-function="sin">sin</button>
                    <button class="btn btn-function" data-function="ln">ln</button>
                    <button class="btn btn-number" data-value="7">7</button>
                    <button class="btn btn-number" data-value="8">8</button>
                    <button class="btn btn-number" data-value="9">9</button>
                    <button class="btn btn-function" data-operator="√∑">√∑</button>

                    <button class="btn btn-function" data-function="pi">œÄ</button>
                    <button class="btn btn-function" data-function="cos">cos</button>
                    <button class="btn btn-function" data-function="log">log</button>
                    <button class="btn btn-number" data-value="4">4</button>
                    <button class="btn btn-number" data-value="5">5</button>
                    <button class="btn btn-number" data-value="6">6</button>
                    <button class="btn btn-function" data-operator="√ó">√ó</button>

                    <button class="btn btn-function" data-function="e">e</button>
                    <button class="btn btn-function" data-function="tan">tan</button>
                    <button class="btn btn-function" data-function="sqrt">‚àö</button>
                    <button class="btn btn-number" data-value="1">1</button>
                    <button class="btn btn-number" data-value="2">2</button>
                    <button class="btn btn-number" data-value="3">3</button>
                    <button class="btn btn-function" data-operator="‚àí">‚àí</button>

                    <button class="btn btn-clear" data-action="clear">AC</button>
                    <button class="btn btn-function" data-function="exp">EXP</button>
                    <button class="btn btn-function" data-operator="^">x^y</button>
                    <button class="btn btn-number" data-value="0">0</button>
                    <button class="btn btn-number" data-value=".">.</button>
                    <button class="btn btn-equals" data-action="equals">=</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        var display = '0';
        var prevValue = null;
        var operator = null;
        var isRadian = true;
        var newNumber = true;
        var isDarkMode = false;

        var app = document.getElementById('app');
        var displayValue = document.getElementById('displayValue');
        var themeToggle = document.getElementById('themeToggle');
        var themeIcon = document.getElementById('themeIcon');
        var themeText = document.getElementById('themeText');
        var radDegBtn = document.getElementById('radDegBtn');

        function updateDisplay() {
            displayValue.textContent = display;
        }

        themeToggle.addEventListener('click', function() {
            isDarkMode = !isDarkMode;
            if (isDarkMode) {
                app.classList.remove('light-mode');
                app.classList.add('dark-mode');
                themeIcon.textContent = '‚òÄÔ∏è';
                themeText.textContent = 'Claro';
            } else {
                app.classList.remove('dark-mode');
                app.classList.add('light-mode');
                themeIcon.textContent = 'üåô';
                themeText.textContent = 'Oscuro';
            }
        });

        function handleNumber(num) {
            if (newNumber) {
                display = num;
                newNumber = false;
            } else {
                display = display === '0' ? num : display + num;
            }
            updateDisplay();
        }

        function handleOperator(op) {
            var value = parseFloat(display);
            
            if (prevValue === null) {
                prevValue = value;
            } else if (operator) {
                var result = calculate(prevValue, value, operator);
                display = String(result);
                prevValue = result;
            }
            
            operator = op;
            newNumber = true;
            updateDisplay();
        }

        function calculate(a, b, op) {
            switch(op) {
                case '+': return a + b;
                case '‚àí': return a - b;
                case '√ó': return a * b;
                case '√∑': return a / b;
                case '^': return Math.pow(a, b);
                default: return b;
            }
        }

        function handleFunction(func) {
            try {
                var result;
                var value = parseFloat(display);
                
                switch(func) {
                    case 'sin':
                        result = isRadian ? Math.sin(value) : Math.sin(value * Math.PI / 180);
                        break;
                    case 'cos':
                        result = isRadian ? Math.cos(value) : Math.cos(value * Math.PI / 180);
                        break;
                    case 'tan':
                        result = isRadian ? Math.tan(value) : Math.tan(value * Math.PI / 180);
                        break;
                    case 'ln':
                        result = Math.log(value);
                        break;
                    case 'log':
                        result = Math.log10(value);
                        break;
                    case 'sqrt':
                        result = Math.sqrt(value);
                        break;
                    case 'inverse':
                        result = 1 / value;
                        break;
                    case 'factorial':
                        result = factorial(Math.floor(value));
                        break;
                    case 'exp':
                        result = Math.exp(value);
                        break;
                    case 'pi':
                        display = String(Math.PI);
                        newNumber = true;
                        updateDisplay();
                        return;
                    case 'e':
                        display = String(Math.E);
                        newNumber = true;
                        updateDisplay();
                        return;
                    default:
                        return;
                }
                
                display = String(result);
                newNumber = true;
                updateDisplay();
            } catch (error) {
                display = 'Error';
                newNumber = true;
                updateDisplay();
            }
        }

        function factorial(n) {
            if (n < 0) return NaN;
            if (n === 0 || n === 1) return 1;
            var result = 1;
            for (var i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }

        function handleEquals() {
            if (operator && prevValue !== null) {
                var value = parseFloat(display);
                var result = calculate(prevValue, value, operator);
                display = String(result);
                prevValue = null;
                operator = null;
                newNumber = true;
                updateDisplay();
            }
        }

        function handleClear() {
            display = '0';
            prevValue = null;
            operator = null;
            newNumber = true;
            updateDisplay();
        }

        function handlePercent() {
            var value = parseFloat(display);
            display = String(value / 100);
            newNumber = true;
            updateDisplay();
        }

        function toggleRadian() {
            isRadian = !isRadian;
            radDegBtn.textContent = isRadian ? 'Rad' : 'Deg';
        }

        var buttons = document.querySelectorAll('.btn');
        for (var j = 0; j < buttons.length; j++) {
            buttons[j].addEventListener('click', function(e) {
                var target = e.currentTarget;
                
                if (target.dataset.value) {
                    handleNumber(target.dataset.value);
                } else if (target.dataset.operator) {
                    handleOperator(target.dataset.operator);
                } else if (target.dataset.function) {
                    handleFunction(target.dataset.function);
                } else if (target.dataset.action) {
                    var action = target.dataset.action;
                    if (action === 'clear') {
                        handleClear();
                    } else if (action === 'equals') {
                        handleEquals();
                    } else if (action === 'percent') {
                        handlePercent();
                    } else if (action === 'toggleRadian') {
                        toggleRadian();
                    }
                }
            });
        }

        updateDisplay();
    </script>
</body>
</html>